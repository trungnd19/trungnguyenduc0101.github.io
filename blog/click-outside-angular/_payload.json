[{"data":1,"prerenderedAt":1349},["ShallowReactive",2],{"content-query-6bo3B5LSjY":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"draft":6,"toc":10,"publishedAt":11,"body":12,"_type":1343,"_id":1344,"_source":1345,"_file":1346,"_stem":1347,"_extension":1348},"/blog/click-outside-angular","blog",false,"","Tạo clickOutside Directive trong Angular","Tạo directive xử lý trường hợp người dùng click ra ngoài dropdow/ dialog.",true,"2022-02-12T00:00:00.000Z",{"type":13,"children":14,"toc":1332},"root",[15,23,29,34,41,652,658,665,670,681,725,837,843,848,856,862,867,880,1006,1012,1020,1203,1211,1241,1246,1268,1274,1287,1293,1326],{"type":16,"tag":17,"props":18,"children":20},"element","h1",{"id":19},"tạo-clickoutside-directive-trong-angular",[21],{"type":22,"value":8},"text",{"type":16,"tag":24,"props":25,"children":26},"p",{},[27],{"type":22,"value":28},"Khi viết code làm một dropdown menu hay modal/ dialog, trường hợp click ra bên ngoài dropdown hay modal, người dùng thường mong muốn dropdown/ modal đó sẽ được đóng lại. Vậy nếu làm Front-end bằng Angular, chúng ta sẽ giải quyết bài toán đó như thế nào?",{"type":16,"tag":24,"props":30,"children":31},{},[32],{"type":22,"value":33},"Câu trả lời: chúng ta sẽ tạo một custom directive để handle việc đóng dropdown/ modal khi người dùng click bên ngoài dropdown/ modal đó.",{"type":16,"tag":35,"props":36,"children":38},"h2",{"id":37},"i-clickoutside-directive-code-sample",[39],{"type":22,"value":40},"I. clickOutside Directive Code Sample",{"type":16,"tag":42,"props":43,"children":47},"pre",{"code":44,"language":45,"meta":7,"className":46,"style":7},"import {\n  Directive,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  HostListener,\n} from '@angular/core';\n\n@Directive({\n  selector: '[clickOutside]',\n})\nexport class ClickOutsideDirective {\n  @Output() clickOutside = new EventEmitter\u003Cvoid>();\n\n  constructor(private elementRef: ElementRef) {}\n\n  @HostListener('document:click', ['$event.target'])\n  public onClick(target: EventTarget) {\n    const clickedInside = this.elementRef.nativeElement.contains(target);\n    if (!clickedInside) {\n      this.clickOutside.emit();\n    }\n  }\n}\n","javascript","language-javascript shiki shiki-themes vitesse-light min-dark",[48],{"type":16,"tag":49,"props":50,"children":51},"code",{"__ignoreMap":7},[52,70,86,99,112,125,138,151,187,196,216,249,258,283,338,346,389,397,455,495,561,593,625,634,643],{"type":16,"tag":53,"props":54,"children":57},"span",{"class":55,"line":56},"line",1,[58,64],{"type":16,"tag":53,"props":59,"children":61},{"style":60},"--shiki-default:#1E754F;--shiki-dark:#F97583",[62],{"type":22,"value":63},"import",{"type":16,"tag":53,"props":65,"children":67},{"style":66},"--shiki-default:#999999;--shiki-dark:#B392F0",[68],{"type":22,"value":69}," {\n",{"type":16,"tag":53,"props":71,"children":73},{"class":55,"line":72},2,[74,80],{"type":16,"tag":53,"props":75,"children":77},{"style":76},"--shiki-default:#B07D48;--shiki-dark:#B392F0",[78],{"type":22,"value":79},"  Directive",{"type":16,"tag":53,"props":81,"children":83},{"style":82},"--shiki-default:#999999;--shiki-dark:#BBBBBB",[84],{"type":22,"value":85},",\n",{"type":16,"tag":53,"props":87,"children":89},{"class":55,"line":88},3,[90,95],{"type":16,"tag":53,"props":91,"children":92},{"style":76},[93],{"type":22,"value":94},"  Input",{"type":16,"tag":53,"props":96,"children":97},{"style":82},[98],{"type":22,"value":85},{"type":16,"tag":53,"props":100,"children":102},{"class":55,"line":101},4,[103,108],{"type":16,"tag":53,"props":104,"children":105},{"style":76},[106],{"type":22,"value":107},"  Output",{"type":16,"tag":53,"props":109,"children":110},{"style":82},[111],{"type":22,"value":85},{"type":16,"tag":53,"props":113,"children":115},{"class":55,"line":114},5,[116,121],{"type":16,"tag":53,"props":117,"children":118},{"style":76},[119],{"type":22,"value":120},"  EventEmitter",{"type":16,"tag":53,"props":122,"children":123},{"style":82},[124],{"type":22,"value":85},{"type":16,"tag":53,"props":126,"children":128},{"class":55,"line":127},6,[129,134],{"type":16,"tag":53,"props":130,"children":131},{"style":76},[132],{"type":22,"value":133},"  ElementRef",{"type":16,"tag":53,"props":135,"children":136},{"style":82},[137],{"type":22,"value":85},{"type":16,"tag":53,"props":139,"children":141},{"class":55,"line":140},7,[142,147],{"type":16,"tag":53,"props":143,"children":144},{"style":76},[145],{"type":22,"value":146},"  HostListener",{"type":16,"tag":53,"props":148,"children":149},{"style":82},[150],{"type":22,"value":85},{"type":16,"tag":53,"props":152,"children":154},{"class":55,"line":153},8,[155,160,165,171,177,182],{"type":16,"tag":53,"props":156,"children":157},{"style":66},[158],{"type":22,"value":159},"}",{"type":16,"tag":53,"props":161,"children":162},{"style":60},[163],{"type":22,"value":164}," from",{"type":16,"tag":53,"props":166,"children":168},{"style":167},"--shiki-default:#B5695977;--shiki-dark:#FFAB70",[169],{"type":22,"value":170}," '",{"type":16,"tag":53,"props":172,"children":174},{"style":173},"--shiki-default:#B56959;--shiki-dark:#FFAB70",[175],{"type":22,"value":176},"@angular/core",{"type":16,"tag":53,"props":178,"children":179},{"style":167},[180],{"type":22,"value":181},"'",{"type":16,"tag":53,"props":183,"children":184},{"style":66},[185],{"type":22,"value":186},";\n",{"type":16,"tag":53,"props":188,"children":190},{"class":55,"line":189},9,[191],{"type":16,"tag":53,"props":192,"children":193},{"emptyLinePlaceholder":10},[194],{"type":22,"value":195},"\n",{"type":16,"tag":53,"props":197,"children":199},{"class":55,"line":198},10,[200,205,211],{"type":16,"tag":53,"props":201,"children":202},{"style":66},[203],{"type":22,"value":204},"@",{"type":16,"tag":53,"props":206,"children":208},{"style":207},"--shiki-default:#59873A;--shiki-dark:#B392F0",[209],{"type":22,"value":210},"Directive",{"type":16,"tag":53,"props":212,"children":213},{"style":66},[214],{"type":22,"value":215},"({\n",{"type":16,"tag":53,"props":217,"children":219},{"class":55,"line":218},11,[220,226,232,236,241,245],{"type":16,"tag":53,"props":221,"children":223},{"style":222},"--shiki-default:#998418;--shiki-dark:#B392F0",[224],{"type":22,"value":225},"  selector",{"type":16,"tag":53,"props":227,"children":229},{"style":228},"--shiki-default:#999999;--shiki-dark:#F97583",[230],{"type":22,"value":231},":",{"type":16,"tag":53,"props":233,"children":234},{"style":167},[235],{"type":22,"value":170},{"type":16,"tag":53,"props":237,"children":238},{"style":173},[239],{"type":22,"value":240},"[clickOutside]",{"type":16,"tag":53,"props":242,"children":243},{"style":167},[244],{"type":22,"value":181},{"type":16,"tag":53,"props":246,"children":247},{"style":82},[248],{"type":22,"value":85},{"type":16,"tag":53,"props":250,"children":252},{"class":55,"line":251},12,[253],{"type":16,"tag":53,"props":254,"children":255},{"style":66},[256],{"type":22,"value":257},"})\n",{"type":16,"tag":53,"props":259,"children":261},{"class":55,"line":260},13,[262,267,273,279],{"type":16,"tag":53,"props":263,"children":264},{"style":60},[265],{"type":22,"value":266},"export",{"type":16,"tag":53,"props":268,"children":270},{"style":269},"--shiki-default:#AB5959;--shiki-dark:#F97583",[271],{"type":22,"value":272}," class",{"type":16,"tag":53,"props":274,"children":276},{"style":275},"--shiki-default:#2E8F82;--shiki-dark:#B392F0",[277],{"type":22,"value":278}," ClickOutsideDirective",{"type":16,"tag":53,"props":280,"children":281},{"style":66},[282],{"type":22,"value":69},{"type":16,"tag":53,"props":284,"children":286},{"class":55,"line":285},14,[287,292,297,302,307,312,317,322,327,333],{"type":16,"tag":53,"props":288,"children":289},{"style":66},[290],{"type":22,"value":291},"  @",{"type":16,"tag":53,"props":293,"children":294},{"style":207},[295],{"type":22,"value":296},"Output",{"type":16,"tag":53,"props":298,"children":299},{"style":66},[300],{"type":22,"value":301},"()",{"type":16,"tag":53,"props":303,"children":304},{"style":76},[305],{"type":22,"value":306}," clickOutside",{"type":16,"tag":53,"props":308,"children":309},{"style":228},[310],{"type":22,"value":311}," =",{"type":16,"tag":53,"props":313,"children":314},{"style":269},[315],{"type":22,"value":316}," new",{"type":16,"tag":53,"props":318,"children":319},{"style":207},[320],{"type":22,"value":321}," EventEmitter",{"type":16,"tag":53,"props":323,"children":324},{"style":66},[325],{"type":22,"value":326},"\u003C",{"type":16,"tag":53,"props":328,"children":330},{"style":329},"--shiki-default:#2E8F82;--shiki-dark:#79B8FF",[331],{"type":22,"value":332},"void",{"type":16,"tag":53,"props":334,"children":335},{"style":66},[336],{"type":22,"value":337},">();\n",{"type":16,"tag":53,"props":339,"children":341},{"class":55,"line":340},15,[342],{"type":16,"tag":53,"props":343,"children":344},{"emptyLinePlaceholder":10},[345],{"type":22,"value":195},{"type":16,"tag":53,"props":347,"children":349},{"class":55,"line":348},16,[350,355,360,365,370,374,379,384],{"type":16,"tag":53,"props":351,"children":352},{"style":269},[353],{"type":22,"value":354},"  constructor",{"type":16,"tag":53,"props":356,"children":357},{"style":66},[358],{"type":22,"value":359},"(",{"type":16,"tag":53,"props":361,"children":362},{"style":269},[363],{"type":22,"value":364},"private",{"type":16,"tag":53,"props":366,"children":367},{"style":76},[368],{"type":22,"value":369}," elementRef",{"type":16,"tag":53,"props":371,"children":372},{"style":228},[373],{"type":22,"value":231},{"type":16,"tag":53,"props":375,"children":376},{"style":275},[377],{"type":22,"value":378}," ElementRef",{"type":16,"tag":53,"props":380,"children":381},{"style":66},[382],{"type":22,"value":383},")",{"type":16,"tag":53,"props":385,"children":386},{"style":66},[387],{"type":22,"value":388}," {}\n",{"type":16,"tag":53,"props":390,"children":392},{"class":55,"line":391},17,[393],{"type":16,"tag":53,"props":394,"children":395},{"emptyLinePlaceholder":10},[396],{"type":22,"value":195},{"type":16,"tag":53,"props":398,"children":400},{"class":55,"line":399},18,[401,405,410,414,418,423,427,432,437,441,446,450],{"type":16,"tag":53,"props":402,"children":403},{"style":66},[404],{"type":22,"value":291},{"type":16,"tag":53,"props":406,"children":407},{"style":207},[408],{"type":22,"value":409},"HostListener",{"type":16,"tag":53,"props":411,"children":412},{"style":66},[413],{"type":22,"value":359},{"type":16,"tag":53,"props":415,"children":416},{"style":167},[417],{"type":22,"value":181},{"type":16,"tag":53,"props":419,"children":420},{"style":173},[421],{"type":22,"value":422},"document:click",{"type":16,"tag":53,"props":424,"children":425},{"style":167},[426],{"type":22,"value":181},{"type":16,"tag":53,"props":428,"children":429},{"style":82},[430],{"type":22,"value":431},",",{"type":16,"tag":53,"props":433,"children":434},{"style":66},[435],{"type":22,"value":436}," [",{"type":16,"tag":53,"props":438,"children":439},{"style":167},[440],{"type":22,"value":181},{"type":16,"tag":53,"props":442,"children":443},{"style":173},[444],{"type":22,"value":445},"$event.target",{"type":16,"tag":53,"props":447,"children":448},{"style":167},[449],{"type":22,"value":181},{"type":16,"tag":53,"props":451,"children":452},{"style":66},[453],{"type":22,"value":454},"])\n",{"type":16,"tag":53,"props":456,"children":458},{"class":55,"line":457},19,[459,464,469,473,478,482,487,491],{"type":16,"tag":53,"props":460,"children":461},{"style":269},[462],{"type":22,"value":463},"  public",{"type":16,"tag":53,"props":465,"children":466},{"style":207},[467],{"type":22,"value":468}," onClick",{"type":16,"tag":53,"props":470,"children":471},{"style":66},[472],{"type":22,"value":359},{"type":16,"tag":53,"props":474,"children":475},{"style":76},[476],{"type":22,"value":477},"target",{"type":16,"tag":53,"props":479,"children":480},{"style":228},[481],{"type":22,"value":231},{"type":16,"tag":53,"props":483,"children":484},{"style":275},[485],{"type":22,"value":486}," EventTarget",{"type":16,"tag":53,"props":488,"children":489},{"style":66},[490],{"type":22,"value":383},{"type":16,"tag":53,"props":492,"children":493},{"style":66},[494],{"type":22,"value":69},{"type":16,"tag":53,"props":496,"children":498},{"class":55,"line":497},20,[499,504,510,514,520,525,530,534,539,543,548,552,556],{"type":16,"tag":53,"props":500,"children":501},{"style":269},[502],{"type":22,"value":503},"    const",{"type":16,"tag":53,"props":505,"children":507},{"style":506},"--shiki-default:#B07D48;--shiki-dark:#79B8FF",[508],{"type":22,"value":509}," clickedInside",{"type":16,"tag":53,"props":511,"children":512},{"style":228},[513],{"type":22,"value":311},{"type":16,"tag":53,"props":515,"children":517},{"style":516},"--shiki-default:#A65E2B;--shiki-dark:#79B8FF",[518],{"type":22,"value":519}," this",{"type":16,"tag":53,"props":521,"children":522},{"style":66},[523],{"type":22,"value":524},".",{"type":16,"tag":53,"props":526,"children":527},{"style":506},[528],{"type":22,"value":529},"elementRef",{"type":16,"tag":53,"props":531,"children":532},{"style":66},[533],{"type":22,"value":524},{"type":16,"tag":53,"props":535,"children":536},{"style":506},[537],{"type":22,"value":538},"nativeElement",{"type":16,"tag":53,"props":540,"children":541},{"style":66},[542],{"type":22,"value":524},{"type":16,"tag":53,"props":544,"children":545},{"style":207},[546],{"type":22,"value":547},"contains",{"type":16,"tag":53,"props":549,"children":550},{"style":66},[551],{"type":22,"value":359},{"type":16,"tag":53,"props":553,"children":554},{"style":76},[555],{"type":22,"value":477},{"type":16,"tag":53,"props":557,"children":558},{"style":66},[559],{"type":22,"value":560},");\n",{"type":16,"tag":53,"props":562,"children":564},{"class":55,"line":563},21,[565,570,575,580,585,589],{"type":16,"tag":53,"props":566,"children":567},{"style":60},[568],{"type":22,"value":569},"    if",{"type":16,"tag":53,"props":571,"children":572},{"style":66},[573],{"type":22,"value":574}," (",{"type":16,"tag":53,"props":576,"children":577},{"style":269},[578],{"type":22,"value":579},"!",{"type":16,"tag":53,"props":581,"children":582},{"style":76},[583],{"type":22,"value":584},"clickedInside",{"type":16,"tag":53,"props":586,"children":587},{"style":66},[588],{"type":22,"value":383},{"type":16,"tag":53,"props":590,"children":591},{"style":66},[592],{"type":22,"value":69},{"type":16,"tag":53,"props":594,"children":596},{"class":55,"line":595},22,[597,602,606,611,615,620],{"type":16,"tag":53,"props":598,"children":599},{"style":516},[600],{"type":22,"value":601},"      this",{"type":16,"tag":53,"props":603,"children":604},{"style":66},[605],{"type":22,"value":524},{"type":16,"tag":53,"props":607,"children":608},{"style":506},[609],{"type":22,"value":610},"clickOutside",{"type":16,"tag":53,"props":612,"children":613},{"style":66},[614],{"type":22,"value":524},{"type":16,"tag":53,"props":616,"children":617},{"style":207},[618],{"type":22,"value":619},"emit",{"type":16,"tag":53,"props":621,"children":622},{"style":66},[623],{"type":22,"value":624},"();\n",{"type":16,"tag":53,"props":626,"children":628},{"class":55,"line":627},23,[629],{"type":16,"tag":53,"props":630,"children":631},{"style":66},[632],{"type":22,"value":633},"    }\n",{"type":16,"tag":53,"props":635,"children":637},{"class":55,"line":636},24,[638],{"type":16,"tag":53,"props":639,"children":640},{"style":66},[641],{"type":22,"value":642},"  }\n",{"type":16,"tag":53,"props":644,"children":646},{"class":55,"line":645},25,[647],{"type":16,"tag":53,"props":648,"children":649},{"style":66},[650],{"type":22,"value":651},"}\n",{"type":16,"tag":35,"props":653,"children":655},{"id":654},"ii-giải-thích",[656],{"type":22,"value":657},"II. Giải thích",{"type":16,"tag":659,"props":660,"children":662},"h3",{"id":661},"_1-hostlistener",[663],{"type":22,"value":664},"1. @HostListener",{"type":16,"tag":24,"props":666,"children":667},{},[668],{"type":22,"value":669},"Đầu tiên, chúng ta sẽ sử dụng @HostListener decorator để lắng nghe sự kiện \"document:click\", là sự kiện sẽ xảy ra khi người dùng click vào bất kì element nào trong DOM.",{"type":16,"tag":24,"props":671,"children":672},{},[673,679],{"type":16,"tag":674,"props":675,"children":676},"strong",{},[677],{"type":22,"value":678},"@HostListener",{"type":22,"value":680}," decorator có 2 tham số:",{"type":16,"tag":682,"props":683,"children":684},"ul",{},[685,702],{"type":16,"tag":686,"props":687,"children":688},"li",{},[689,694,696,701],{"type":16,"tag":674,"props":690,"children":691},{},[692],{"type":22,"value":693},"eventName?",{"type":22,"value":695},": Tham số thứ nhất là tên sự kiện cần lắng nghe. Ở đây ta lắng nghe sự kiện ",{"type":16,"tag":674,"props":697,"children":698},{},[699],{"type":22,"value":700},"“document:click”",{"type":22,"value":524},{"type":16,"tag":686,"props":703,"children":704},{},[705,710,712,717,719,723],{"type":16,"tag":674,"props":706,"children":707},{},[708],{"type":22,"value":709},"args?",{"type":22,"value":711},": Tham số thứ hai là một array chứa các arguments mà ta sẽ truyền cho hàm xử lý sự kiện được gọi tới mỗi khi sự kiện cần lắng nghe (đã nêu trong tham số thứ nhất) xảy ra. Ở đây, ta truyền ",{"type":16,"tag":674,"props":713,"children":714},{},[715],{"type":22,"value":716},"“$event.target”",{"type":22,"value":718}," cho hàm onClick(target: EventTarget). Parameter “target” của hàm onClick(target: EventTarget) ở đây chính là ",{"type":16,"tag":674,"props":720,"children":721},{},[722],{"type":22,"value":716},{"type":22,"value":724}," được decorator truyền sang.",{"type":16,"tag":42,"props":726,"children":728},{"code":727,"language":45,"meta":7,"className":46,"style":7},"  @HostListener('document:click', ['$event.target'])\n  public onClick(target: EventTarget) {\n    // ...\n  }\n",[729],{"type":16,"tag":49,"props":730,"children":731},{"__ignoreMap":7},[732,783,821,830],{"type":16,"tag":53,"props":733,"children":734},{"class":55,"line":56},[735,739,743,747,751,755,759,763,767,771,775,779],{"type":16,"tag":53,"props":736,"children":737},{"style":66},[738],{"type":22,"value":291},{"type":16,"tag":53,"props":740,"children":741},{"style":207},[742],{"type":22,"value":409},{"type":16,"tag":53,"props":744,"children":745},{"style":66},[746],{"type":22,"value":359},{"type":16,"tag":53,"props":748,"children":749},{"style":167},[750],{"type":22,"value":181},{"type":16,"tag":53,"props":752,"children":753},{"style":173},[754],{"type":22,"value":422},{"type":16,"tag":53,"props":756,"children":757},{"style":167},[758],{"type":22,"value":181},{"type":16,"tag":53,"props":760,"children":761},{"style":82},[762],{"type":22,"value":431},{"type":16,"tag":53,"props":764,"children":765},{"style":66},[766],{"type":22,"value":436},{"type":16,"tag":53,"props":768,"children":769},{"style":167},[770],{"type":22,"value":181},{"type":16,"tag":53,"props":772,"children":773},{"style":173},[774],{"type":22,"value":445},{"type":16,"tag":53,"props":776,"children":777},{"style":167},[778],{"type":22,"value":181},{"type":16,"tag":53,"props":780,"children":781},{"style":66},[782],{"type":22,"value":454},{"type":16,"tag":53,"props":784,"children":785},{"class":55,"line":72},[786,790,794,798,802,808,813,817],{"type":16,"tag":53,"props":787,"children":788},{"style":76},[789],{"type":22,"value":463},{"type":16,"tag":53,"props":791,"children":792},{"style":207},[793],{"type":22,"value":468},{"type":16,"tag":53,"props":795,"children":796},{"style":66},[797],{"type":22,"value":359},{"type":16,"tag":53,"props":799,"children":800},{"style":76},[801],{"type":22,"value":477},{"type":16,"tag":53,"props":803,"children":805},{"style":804},"--shiki-default:#393A34;--shiki-dark:#B392F0",[806],{"type":22,"value":807},": ",{"type":16,"tag":53,"props":809,"children":810},{"style":76},[811],{"type":22,"value":812},"EventTarget",{"type":16,"tag":53,"props":814,"children":815},{"style":66},[816],{"type":22,"value":383},{"type":16,"tag":53,"props":818,"children":819},{"style":66},[820],{"type":22,"value":69},{"type":16,"tag":53,"props":822,"children":823},{"class":55,"line":88},[824],{"type":16,"tag":53,"props":825,"children":827},{"style":826},"--shiki-default:#A0ADA0;--shiki-dark:#6B737C",[828],{"type":22,"value":829},"    // ...\n",{"type":16,"tag":53,"props":831,"children":832},{"class":55,"line":101},[833],{"type":16,"tag":53,"props":834,"children":835},{"style":66},[836],{"type":22,"value":642},{"type":16,"tag":659,"props":838,"children":840},{"id":839},"_2-elementref",[841],{"type":22,"value":842},"2. elementRef",{"type":16,"tag":24,"props":844,"children":845},{},[846],{"type":22,"value":847},"Dùng elementRef để trỏ tới element được gán directive",{"type":16,"tag":42,"props":849,"children":851},{"code":850},"constructor(private elementRef: ElementRef) {}\n",[852],{"type":16,"tag":49,"props":853,"children":854},{"__ignoreMap":7},[855],{"type":22,"value":850},{"type":16,"tag":659,"props":857,"children":859},{"id":858},"_3-nodecontains-method",[860],{"type":22,"value":861},"3. Node.contains() method",{"type":16,"tag":24,"props":863,"children":864},{},[865],{"type":22,"value":866},"Tiếp theo, ta sẽ dùng Node.contains() method, dùng để check xem một node có là child node của một node nào đó trong DOM Tree hay không. Method này trả về true/ false.",{"type":16,"tag":682,"props":868,"children":869},{},[870,875],{"type":16,"tag":686,"props":871,"children":872},{},[873],{"type":22,"value":874},"Nếu người dùng click bên trong element được gắn directive, Node.contains() method sẽ trả về true.",{"type":16,"tag":686,"props":876,"children":877},{},[878],{"type":22,"value":879},"Ngược lại, nếu người dùng click bên ngoài element được gắn directive, Node.contains() method sẽ trả về false, khi đó ta sẽ emit @Output() clickOutside.",{"type":16,"tag":42,"props":881,"children":883},{"code":882,"language":45,"meta":7,"className":46,"style":7},"const clickedInside = this.elementRef.nativeElement.contains(target);\nif (!clickedInside) {\n  this.clickOutside.emit();\n}\n",[884],{"type":16,"tag":49,"props":885,"children":886},{"__ignoreMap":7},[887,943,971,999],{"type":16,"tag":53,"props":888,"children":889},{"class":55,"line":56},[890,895,899,903,907,911,915,919,923,927,931,935,939],{"type":16,"tag":53,"props":891,"children":892},{"style":269},[893],{"type":22,"value":894},"const",{"type":16,"tag":53,"props":896,"children":897},{"style":506},[898],{"type":22,"value":509},{"type":16,"tag":53,"props":900,"children":901},{"style":228},[902],{"type":22,"value":311},{"type":16,"tag":53,"props":904,"children":905},{"style":516},[906],{"type":22,"value":519},{"type":16,"tag":53,"props":908,"children":909},{"style":66},[910],{"type":22,"value":524},{"type":16,"tag":53,"props":912,"children":913},{"style":506},[914],{"type":22,"value":529},{"type":16,"tag":53,"props":916,"children":917},{"style":66},[918],{"type":22,"value":524},{"type":16,"tag":53,"props":920,"children":921},{"style":506},[922],{"type":22,"value":538},{"type":16,"tag":53,"props":924,"children":925},{"style":66},[926],{"type":22,"value":524},{"type":16,"tag":53,"props":928,"children":929},{"style":207},[930],{"type":22,"value":547},{"type":16,"tag":53,"props":932,"children":933},{"style":66},[934],{"type":22,"value":359},{"type":16,"tag":53,"props":936,"children":937},{"style":76},[938],{"type":22,"value":477},{"type":16,"tag":53,"props":940,"children":941},{"style":66},[942],{"type":22,"value":560},{"type":16,"tag":53,"props":944,"children":945},{"class":55,"line":72},[946,951,955,959,963,967],{"type":16,"tag":53,"props":947,"children":948},{"style":60},[949],{"type":22,"value":950},"if",{"type":16,"tag":53,"props":952,"children":953},{"style":66},[954],{"type":22,"value":574},{"type":16,"tag":53,"props":956,"children":957},{"style":269},[958],{"type":22,"value":579},{"type":16,"tag":53,"props":960,"children":961},{"style":76},[962],{"type":22,"value":584},{"type":16,"tag":53,"props":964,"children":965},{"style":66},[966],{"type":22,"value":383},{"type":16,"tag":53,"props":968,"children":969},{"style":66},[970],{"type":22,"value":69},{"type":16,"tag":53,"props":972,"children":973},{"class":55,"line":88},[974,979,983,987,991,995],{"type":16,"tag":53,"props":975,"children":976},{"style":516},[977],{"type":22,"value":978},"  this",{"type":16,"tag":53,"props":980,"children":981},{"style":66},[982],{"type":22,"value":524},{"type":16,"tag":53,"props":984,"children":985},{"style":506},[986],{"type":22,"value":610},{"type":16,"tag":53,"props":988,"children":989},{"style":66},[990],{"type":22,"value":524},{"type":16,"tag":53,"props":992,"children":993},{"style":207},[994],{"type":22,"value":619},{"type":16,"tag":53,"props":996,"children":997},{"style":66},[998],{"type":22,"value":624},{"type":16,"tag":53,"props":1000,"children":1001},{"class":55,"line":101},[1002],{"type":16,"tag":53,"props":1003,"children":1004},{"style":66},[1005],{"type":22,"value":651},{"type":16,"tag":659,"props":1007,"children":1009},{"id":1008},"_4-sử-dụng-directive-vừa-tạo",[1010],{"type":22,"value":1011},"4. Sử dụng directive vừa tạo",{"type":16,"tag":682,"props":1013,"children":1014},{},[1015],{"type":16,"tag":686,"props":1016,"children":1017},{},[1018],{"type":22,"value":1019},"Import vào module có component cần sử dụng directive:",{"type":16,"tag":42,"props":1021,"children":1023},{"code":1022,"language":45,"meta":7,"className":46,"style":7},"import { ClickOutsideDirective } from './click-outside.directive';\n\n@NgModule({\n  imports:      [ BrowserModule, FormsModule ],\n  declarations: [ AppComponent,  ClickOutsideDirective ],\n  bootstrap:    [ AppComponent ]\n})\n",[1024],{"type":16,"tag":49,"props":1025,"children":1026},{"__ignoreMap":7},[1027,1069,1076,1092,1132,1170,1196],{"type":16,"tag":53,"props":1028,"children":1029},{"class":55,"line":56},[1030,1034,1039,1043,1048,1052,1056,1061,1065],{"type":16,"tag":53,"props":1031,"children":1032},{"style":60},[1033],{"type":22,"value":63},{"type":16,"tag":53,"props":1035,"children":1036},{"style":66},[1037],{"type":22,"value":1038}," {",{"type":16,"tag":53,"props":1040,"children":1041},{"style":76},[1042],{"type":22,"value":278},{"type":16,"tag":53,"props":1044,"children":1045},{"style":66},[1046],{"type":22,"value":1047}," }",{"type":16,"tag":53,"props":1049,"children":1050},{"style":60},[1051],{"type":22,"value":164},{"type":16,"tag":53,"props":1053,"children":1054},{"style":167},[1055],{"type":22,"value":170},{"type":16,"tag":53,"props":1057,"children":1058},{"style":173},[1059],{"type":22,"value":1060},"./click-outside.directive",{"type":16,"tag":53,"props":1062,"children":1063},{"style":167},[1064],{"type":22,"value":181},{"type":16,"tag":53,"props":1066,"children":1067},{"style":66},[1068],{"type":22,"value":186},{"type":16,"tag":53,"props":1070,"children":1071},{"class":55,"line":72},[1072],{"type":16,"tag":53,"props":1073,"children":1074},{"emptyLinePlaceholder":10},[1075],{"type":22,"value":195},{"type":16,"tag":53,"props":1077,"children":1078},{"class":55,"line":88},[1079,1083,1088],{"type":16,"tag":53,"props":1080,"children":1081},{"style":66},[1082],{"type":22,"value":204},{"type":16,"tag":53,"props":1084,"children":1085},{"style":207},[1086],{"type":22,"value":1087},"NgModule",{"type":16,"tag":53,"props":1089,"children":1090},{"style":66},[1091],{"type":22,"value":215},{"type":16,"tag":53,"props":1093,"children":1094},{"class":55,"line":101},[1095,1100,1104,1109,1114,1118,1123,1128],{"type":16,"tag":53,"props":1096,"children":1097},{"style":222},[1098],{"type":22,"value":1099},"  imports",{"type":16,"tag":53,"props":1101,"children":1102},{"style":228},[1103],{"type":22,"value":231},{"type":16,"tag":53,"props":1105,"children":1106},{"style":66},[1107],{"type":22,"value":1108},"      [",{"type":16,"tag":53,"props":1110,"children":1111},{"style":76},[1112],{"type":22,"value":1113}," BrowserModule",{"type":16,"tag":53,"props":1115,"children":1116},{"style":82},[1117],{"type":22,"value":431},{"type":16,"tag":53,"props":1119,"children":1120},{"style":76},[1121],{"type":22,"value":1122}," FormsModule",{"type":16,"tag":53,"props":1124,"children":1125},{"style":66},[1126],{"type":22,"value":1127}," ]",{"type":16,"tag":53,"props":1129,"children":1130},{"style":82},[1131],{"type":22,"value":85},{"type":16,"tag":53,"props":1133,"children":1134},{"class":55,"line":114},[1135,1140,1144,1148,1153,1157,1162,1166],{"type":16,"tag":53,"props":1136,"children":1137},{"style":222},[1138],{"type":22,"value":1139},"  declarations",{"type":16,"tag":53,"props":1141,"children":1142},{"style":228},[1143],{"type":22,"value":231},{"type":16,"tag":53,"props":1145,"children":1146},{"style":66},[1147],{"type":22,"value":436},{"type":16,"tag":53,"props":1149,"children":1150},{"style":76},[1151],{"type":22,"value":1152}," AppComponent",{"type":16,"tag":53,"props":1154,"children":1155},{"style":82},[1156],{"type":22,"value":431},{"type":16,"tag":53,"props":1158,"children":1159},{"style":76},[1160],{"type":22,"value":1161},"  ClickOutsideDirective",{"type":16,"tag":53,"props":1163,"children":1164},{"style":66},[1165],{"type":22,"value":1127},{"type":16,"tag":53,"props":1167,"children":1168},{"style":82},[1169],{"type":22,"value":85},{"type":16,"tag":53,"props":1171,"children":1172},{"class":55,"line":127},[1173,1178,1182,1187,1191],{"type":16,"tag":53,"props":1174,"children":1175},{"style":222},[1176],{"type":22,"value":1177},"  bootstrap",{"type":16,"tag":53,"props":1179,"children":1180},{"style":228},[1181],{"type":22,"value":231},{"type":16,"tag":53,"props":1183,"children":1184},{"style":66},[1185],{"type":22,"value":1186},"    [",{"type":16,"tag":53,"props":1188,"children":1189},{"style":76},[1190],{"type":22,"value":1152},{"type":16,"tag":53,"props":1192,"children":1193},{"style":66},[1194],{"type":22,"value":1195}," ]\n",{"type":16,"tag":53,"props":1197,"children":1198},{"class":55,"line":140},[1199],{"type":16,"tag":53,"props":1200,"children":1201},{"style":66},[1202],{"type":22,"value":257},{"type":16,"tag":682,"props":1204,"children":1205},{},[1206],{"type":16,"tag":686,"props":1207,"children":1208},{},[1209],{"type":22,"value":1210},"Trong template của component, có thể import như sau:\nCách 1: Nêu rõ tên directive và event binding hàm xử lý khi người dùng click outside dropdown/ dialog",{"type":16,"tag":42,"props":1212,"children":1214},{"code":1213,"language":45,"meta":7,"className":46,"style":7},"\u003Cdiv clickOutside (clickOutside)=\"someHandler()\">\u003C/div>\n",[1215],{"type":16,"tag":49,"props":1216,"children":1217},{"__ignoreMap":7},[1218],{"type":16,"tag":53,"props":1219,"children":1220},{"class":55,"line":56},[1221,1225,1231,1235],{"type":16,"tag":53,"props":1222,"children":1223},{"style":66},[1224],{"type":22,"value":326},{"type":16,"tag":53,"props":1226,"children":1228},{"style":1227},"--shiki-default:#1E754F;--shiki-dark:#FFAB70",[1229],{"type":22,"value":1230},"div",{"type":16,"tag":53,"props":1232,"children":1233},{"style":76},[1234],{"type":22,"value":306},{"type":16,"tag":53,"props":1236,"children":1238},{"style":1237},"--shiki-default:#B31D28;--shiki-dark:#B392F0;--shiki-default-font-style:italic;--shiki-dark-font-style:inherit",[1239],{"type":22,"value":1240}," (clickOutside)=\"someHandler()\">\u003C/div>\n",{"type":16,"tag":24,"props":1242,"children":1243},{},[1244],{"type":22,"value":1245},"Cách 2: ở đây, do tên directive và event binding trùng nhau, cộng với việc directive chỉ có duy nhất một event binding => không cần nêu tên directive",{"type":16,"tag":42,"props":1247,"children":1249},{"code":1248,"language":45,"meta":7,"className":46,"style":7},"\u003Cdiv (clickOutside)=\"someHandler()\">\u003C/div>\n",[1250],{"type":16,"tag":49,"props":1251,"children":1252},{"__ignoreMap":7},[1253],{"type":16,"tag":53,"props":1254,"children":1255},{"class":55,"line":56},[1256,1260,1264],{"type":16,"tag":53,"props":1257,"children":1258},{"style":66},[1259],{"type":22,"value":326},{"type":16,"tag":53,"props":1261,"children":1262},{"style":1227},[1263],{"type":22,"value":1230},{"type":16,"tag":53,"props":1265,"children":1266},{"style":1237},[1267],{"type":22,"value":1240},{"type":16,"tag":659,"props":1269,"children":1271},{"id":1270},"_5-stackblitz-link",[1272],{"type":22,"value":1273},"5. Stackblitz link:",{"type":16,"tag":24,"props":1275,"children":1276},{},[1277,1279],{"type":22,"value":1278},"Các bạn có thể tham khảo demo trên stackblitz:\n",{"type":16,"tag":1280,"props":1281,"children":1285},"a",{"href":1282,"rel":1283},"https://stackblitz.com/edit/angular-j7jqq2",[1284],"nofollow",[1286],{"type":22,"value":1282},{"type":16,"tag":35,"props":1288,"children":1290},{"id":1289},"reference",[1291],{"type":22,"value":1292},"Reference",{"type":16,"tag":1294,"props":1295,"children":1296},"ol",{},[1297,1308,1317],{"type":16,"tag":686,"props":1298,"children":1299},{},[1300,1306],{"type":16,"tag":1280,"props":1301,"children":1304},{"href":1302,"rel":1303},"https://www.willtaylor.blog/click-outside-directive/",[1284],[1305],{"type":22,"value":1302},{"type":22,"value":1307}," (link bài gốc)",{"type":16,"tag":686,"props":1309,"children":1310},{},[1311],{"type":16,"tag":1280,"props":1312,"children":1315},{"href":1313,"rel":1314},"https://angular.io/api/core/HostListener",[1284],[1316],{"type":22,"value":1313},{"type":16,"tag":686,"props":1318,"children":1319},{},[1320],{"type":16,"tag":1280,"props":1321,"children":1324},{"href":1322,"rel":1323},"https://developer.mozilla.org/en-US/docs/Web/API/Node/contains",[1284],[1325],{"type":22,"value":1322},{"type":16,"tag":1327,"props":1328,"children":1329},"style",{},[1330],{"type":22,"value":1331},"html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}",{"title":7,"searchDepth":72,"depth":72,"links":1333},[1334,1335,1342],{"id":37,"depth":72,"text":40},{"id":654,"depth":72,"text":657,"children":1336},[1337,1338,1339,1340,1341],{"id":661,"depth":88,"text":664},{"id":839,"depth":88,"text":842},{"id":858,"depth":88,"text":861},{"id":1008,"depth":88,"text":1011},{"id":1270,"depth":88,"text":1273},{"id":1289,"depth":72,"text":1292},"markdown","content:blog:click-outside-angular.md","content","blog/click-outside-angular.md","blog/click-outside-angular","md",1726586636755]